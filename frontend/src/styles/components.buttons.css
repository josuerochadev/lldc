/* ====== BOUTONS ====== */
@layer components {
  /* Bouton menu toggle */
  .menu-toggle-button {
    @apply inline-flex h-[44px] w-auto items-center justify-center rounded-btn bg-transparent px-4 text-title-sm font-semibold uppercase text-text transition duration-250 focus:outline-none;
    -webkit-tap-highlight-color: transparent;
  }
  .menu-toggle-button:focus-visible {
    @apply focus-ring;
  }

  .menu-toggle-icon {
    @apply relative block h-5 w-6;
  }
  .menu-toggle-bar {
    @apply absolute left-0 right-0 h-[2px] bg-current transition duration-250;
  }
  .menu-toggle-bar--top {
    top: 0;
  }
  .menu-toggle-bar--middle {
    top: 50%;
    transform: translateY(-50%);
  }
  .menu-toggle-bar--bottom {
    bottom: 0;
  }
  .menu-toggle-button[data-state='open'] .menu-toggle-bar--top {
    transform: translateY(10px) rotate(45deg);
  }
  .menu-toggle-button[data-state='open'] .menu-toggle-bar--middle {
    opacity: 0;
  }
  .menu-toggle-button[data-state='open'] .menu-toggle-bar--bottom {
    transform: translateY(-10px) rotate(-45deg);
  }

  @media (prefers-reduced-motion: reduce) {
    .menu-toggle-button {
      transition-duration: 0.01ms !important;
    }
    .menu-toggle-button[data-state='open'] .menu-toggle-bar--top,
    .menu-toggle-button[data-state='open'] .menu-toggle-bar--bottom {
      transform: none !important;
    }
    .menu-toggle-button[data-state='open'] .menu-toggle-bar--middle {
      opacity: 1 !important;
    }
  }

  /* Bouton principal - Style touche clavier */
  .button-primary {
    @apply inline-flex items-center justify-center px-btn-x py-btn-y text-text-cta font-semibold focus:outline-none focus-visible:ring-2 focus-visible:ring-accent;

    /* Variables pour les animations */
    --key-press-distance: 3px;
    --key-shadow-blur: 8px;
    --key-shadow-spread: 0px;

    position: relative;
    cursor: pointer;
    user-select: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -webkit-tap-highlight-color: transparent;

    /* Forme de touche clavier */
    border-radius: 8px;
    border: 1px solid rgba(var(--color-mauve-dark-rgb), 0.3);

    /* Surface de touche - fond sombre mat */
    background: linear-gradient(
      145deg,
      rgba(var(--color-mauve-dark-rgb), 0.95) 0%,
      rgba(var(--color-mauve-dark-rgb), 0.85) 50%,
      rgba(var(--color-mauve-dark-rgb), 0.8) 100%
    );

    /* Texte clair contrasté pour lisibilité */
    color: rgba(var(--color-violet-light-rgb), 0.92);
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3);

    /* Ombre de touche surélevée */
    box-shadow:
      /* Bord supérieur éclairé */
      inset 0 2px 0 rgba(var(--color-violet-light-rgb), 0.3),
      /* Bord inférieur plus sombre */ inset 0 -2px 0 rgba(0, 0, 0, 0.4),
      /* Ombre portée de la touche */ 0 var(--key-press-distance) var(--key-shadow-blur)
        var(--key-shadow-spread) rgba(0, 0, 0, 0.4),
      /* Halo subtil */ 0 1px 2px rgba(0, 0, 0, 0.2);

    /* Transition fluide pour effet de pression */
    transition:
      transform 120ms cubic-bezier(0.2, 0, 0.4, 1),
      box-shadow 120ms cubic-bezier(0.2, 0, 0.4, 1),
      background 120ms ease-out;
  }

  /* Suppression des pseudo-éléments complexes pour simplicité */

  @media (hover: hover) {
    .button-primary:hover {
      /* Légère élévation au hover */
      transform: translateY(-1px);

      /* Surface légèrement plus brillante */
      background: linear-gradient(
        145deg,
        rgba(var(--color-mauve-dark-rgb), 0.98) 0%,
        rgba(var(--color-mauve-dark-rgb), 0.88) 50%,
        rgba(var(--color-mauve-dark-rgb), 0.83) 100%
      );

      /* Ombre plus marquée pour effet de relief */
      box-shadow:
        inset 0 2px 0 rgba(var(--color-violet-light-rgb), 0.4),
        inset 0 -2px 0 rgba(0, 0, 0, 0.5),
        0 calc(var(--key-press-distance) + 1px) calc(var(--key-shadow-blur) + 2px)
          var(--key-shadow-spread) rgba(0, 0, 0, 0.5),
        0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .button-primary:active {
      /* Animation de pression - touche enfoncée */
      transform: translateY(var(--key-press-distance));

      /* Surface légèrement assombrie comme une vraie touche pressée */
      background: linear-gradient(
        145deg,
        rgba(var(--color-mauve-dark-rgb), 0.85) 0%,
        rgba(var(--color-mauve-dark-rgb), 0.75) 50%,
        rgba(var(--color-mauve-dark-rgb), 0.7) 100%
      );

      /* Ombre réduite = touche au fond */
      box-shadow:
        inset 0 1px 0 rgba(var(--color-violet-light-rgb), 0.15),
        inset 0 -1px 0 rgba(0, 0, 0, 0.6),
        0 1px 3px rgba(0, 0, 0, 0.4);

      /* Transition plus rapide pour feedback immédiat */
      transition:
        transform 60ms cubic-bezier(0.2, 0, 0.4, 1),
        box-shadow 60ms cubic-bezier(0.2, 0, 0.4, 1),
        background 60ms ease-out;
    }
  }

  /* Supprimé : ancien effet overlay */

  .button-primary:focus-visible {
    outline: none;
    /* Ring focus avec le nouveau design */
    box-shadow:
      /* Ring de focus */
      0 0 0 3px rgba(var(--color-violet-light-rgb), 0.6),
      /* Ombres de touche préservées */ inset 0 2px 0 rgba(var(--color-violet-light-rgb), 0.3),
      inset 0 -2px 0 rgba(0, 0, 0, 0.4),
      0 var(--key-press-distance) var(--key-shadow-blur) var(--key-shadow-spread) rgba(0, 0, 0, 0.4),
      0 1px 2px rgba(0, 0, 0, 0.2);
  }

  @media (prefers-reduced-motion: reduce) {
    .button-primary,
    .button-primary:hover,
    .button-primary:active {
      transform: none !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Variantes supprimées - design unifié */
}

/* Icônes dans les boutons */
.button-primary .button-icon {
  /* Taille basée sur la hauteur de ligne du texte */
  height: 1em;
  width: 1em;
  /* Alignement vertical parfait */
  flex-shrink: 0;
  /* Transition pour les animations d'icône */
  transition: transform 250ms ease-out;
}

/* Animations utilisées */
@keyframes overlay {
  from {
    opacity: 0;
    transform: scale(0.98);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
@keyframes ripple {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    transform: translate(-50%, -50%) scale(0.9);
  }
}
